<div class="custom-control custom-checkbox" *ngFor="let option of options; index as i">
  <input
    class="custom-control-input"
    [class.is-valid]="showValid"
    [class.is-invalid]="showInvalid"
    type="checkbox"
    generatedId
    #checkbox
    (change)="onCheckboxChange($event, option)"
    [checked]="isOptionActive(option)"
    [disabled]="isDisabled"
  >
  <label class="custom-control-label" [referenceId]="checkbox">
    <ng-container *ngTemplateOutlet="labelTemplate || defaultLabelTemplate; context: {'$implicit': option}"></ng-container>
  </label>
</div>

<ng-template #defaultLabelTemplate let-option>{{ option }}</ng-template>
